# ๐ก๏ธ ีีกีฐีฅีฝีฟีกีพีธึีดีกีถ ีฐีกีดีกีฏีกึีฃ

## ๐ ีีฏีกึีกีฃึีธึีฉีตีธึีถ

CoordinatBot-ีจ ีถีฅึีกีผีธึีด ีง ีกีดีขีธีฒีปีกีฏีกีถ ีบีกีฐีฅีฝีฟีกีพีธึีดีกีถ ีฐีกีดีกีฏีกึีฃ, ีธึีจ ีฉีธึีตีฌ ีง ีฟีกีฌีซีฝ ีฝีฟีฅีฒีฎีฅีฌ, ีคีซีฟีฅีฌ, ีพีฅึีกีฏีกีถีฃีถีฅีฌ ึ ีฏีกีผีกีพีกึีฅีฌ ีฟีพีตีกีฌีถีฅึีซ ีบีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏีถีฅึีจ:

## ๐ง ิณีธึีฎีกีผีธึีตีฉีถีฅึ

### โ ีีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏีถีฅึีซ ีฝีฟีฅีฒีฎีธึีด

- **ิฑีพีฟีธีดีกีฟ ีฝีฟีฅีฒีฎีธึีด** ีขีธีฌีธึ ีฟีพีตีกีฌีถีฅึีซ ีกีดีขีธีฒีปีกีฏีกีถ ีบีกีฐีฅีฝีฟีกีพีธึีดีกีถ
- **ิบีกีดีกีถีกีฏีซ ีถีทีธึีดีถีฅึ** ีตีธึึีกึีกีถีนีตีธึึ ึึีซีถีกีฏีซ ีฐีกีดีกึ
- **ีีพีตีกีฌีถีฅึีซ ีฝีฅีฒีดีธึีด** ZIP ีกึีญีซีพีถีฅึีธึีด ีฟีกึีกีฎึ ีญีถีกีตีฅีฌีธึ ีฐีกีดีกึ
- **ีีฅีฟีกีฟีพีตีกีฌีถีฅึ** ีนีกึีซ ึ ีขีธีพีกีถีคีกีฏีธึีฉีตีกีถ ีดีกีฝีซีถ

### ๐ ิปีถีน ีง ีถีฅึีกีผีพีธึีด ีบีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏีธึีด

- **ีีพีตีกีฌีถีฅึีซ ีขีกีฆีก** (`data/expenses.db`)
- **ีีฃีฟีกีฟีฅึีฅึ** (`data/users.json`)
- **ินีธึีตีฌีกีฟึีพีกีฎ ึีฃีฟีกีฟีฅึีฅึ** (`data/allowed_users.json`)
- **ิฒีธีฟีซ ีฏีกึีฃีกีพีธึีธึีดีถีฅึ** (`data/bot_config.json`)
- **ีีฅีฒีกีตีถีกึีธึีด** (`src/config/localization.json`)
- **ีีกีพีกีฟีกึีดีกีฃึีฅึ** (`credentials/` ีบีกีถีกีฏ)

### ๐ ีีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏีถีฅึีซ ีคีซีฟีธึีด

- **ิฒีธีฌีธึ ึึีซีถีกีฏีถีฅึีซ ึีกีถีฏ** ีฝีฟีฅีฒีฎีดีกีถ ีกีดีฝีกีฉีพีฅึีธีพ
- **ีีธึึีกึีกีถีนีตีธึึ ึึีซีถีกีฏีซ ีนีกึีจ**
- **ีีฏีกึีกีฃึีธึีฉีตีธึีถ** ึ ีดีฅีฟีกีฟีพีตีกีฌีถีฅึ
- **ีีกีพีฅึีกีฏีกีถีธึีฉีตีกีถ ีฏีกึีฃีกีพีซีณีกีฏ**

### ๐ ีีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏีซึ ีพีฅึีกีฏีกีถีฃีถีธึีด

- **ิฑีถีพีฟีกีถีฃ ีพีฅึีกีฏีกีถีฃีถีธึีด** ีจีถีฉีกึีซีฏ ีพีซีณีกีฏีซ ีบีกีฐีฅีฝีฟีกีพีธึีดีกีดีข
- **ิฑีดีขีธีฒีปีกีฏีกีถีธึีฉีตีกีถ ีฝีฟีธึีฃีธึีด** ีพีฅึีกีฏีกีถีฃีถีธึีดีซึ ีกีผีกีป
- **ิณีธึีฎีธีฒีธึีฉีตีกีถ ีฐีกีฝีฟีกีฟีธึีด** ีบีกีฟีกีฐีกีฏีกีถ ีฏีธึีธึีฝีฟีถีฅึีซึ ีญีธึีฝีกึีฅีฌีธึ ีฐีกีดีกึ

### ๐๏ธ ีีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏีถีฅึีซ ีฏีกีผีกีพีกึีธึีด

- **ีีซีถ ึึีซีถีกีฏีถีฅึีซ ีปีถีปีธึีด** (30 ึึีซึ ีฐีซีถ)
- **ีีถีกีฝีพีกีฎ ึีกีตีฌีฅึีซ ีดีกึึีธึีด**
- **ิฑีพีฟีธีดีกีฟ ีพีกีพีฅึีกึีธึีด** ีฃีธึีฎีกึีฏีดีกีถ ีชีกีดีกีถีกีฏ

## ๐ ีีฃีฟีกีฃีธึีฎีธึีด

### ิฒีธีฟีซ ีดีซีปีฅึีฅีฝ

1. **ีีซีดีถีกีฏีกีถ ีจีถีฟึีกึีกีถีฏ** โ "๐ก๏ธ ีีกีฐีฅีฝีฟีกีพีธึีธึีด"
2. ิธีถีฟึีฅึ ีกีถีฐึีกีชีฅีทีฟ ีฃีธึีฎีธีฒีธึีฉีตีธึีถีจ:
   - **๐พ ีีฟีฅีฒีฎีฅีฌ ีบีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏ** - ีฝีฟีฅีฒีฎีธึีด ีง ีถีธึ ึึีซีถีกีฏ
   - **๐ ีึีซีถีกีฏีถีฅึีซ ึีกีถีฏ** - ึีธึีตึ ีง ีฟีกีฌีซีฝ ีขีธีฌีธึ ีฐีกีฝีกีถีฅีฌีซ ึึีซีถีกีฏีถีฅึีจ
   - **๐ ีีฅึีกีฏีกีถีฃีถีฅีฌ ีบีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏีซึ** - ีพีฅึีกีฏีกีถีฃีถีธึีด ีง ีฟีพีตีกีฌีถีฅึีจ
   - **๐๏ธ ีีกึึีฅีฌ ีฐีซีถ ึึีซีถีกีฏีถีฅึีจ** - ีฐีฅีผีกึีถีธึีด ีง ีฐีถีกึีกีฎ ึึีซีถีกีฏีถีฅึีจ

### ิพึีกีฃึีกีตีซีถ ีดีซีปีฅึีฅีฝ

```python
from src.utils.backup_manager import BackupManager

# ิฟีกีผีกีพีกึีนีซ ีฝีฟีฅีฒีฎีธึีด
backup_manager = BackupManager()

# ีีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏีซ ีฝีฟีฅีฒีฎีธึีด
backup_info = backup_manager.create_backup("ีึีซีถีกีฏีซ ีถีฏีกึีกีฃึีธึีฉีตีธึีถ")

# ีึีซีถีกีฏีถีฅึีซ ึีกีถีฏ
backups = backup_manager.list_backups()

# ีีฅึีกีฏีกีถีฃีถีธึีด
backup_manager.restore_backup("backup_20240101_120000.zip")

# ีีซีถ ึึีซีถีกีฏีถีฅึีซ ีดีกึึีธึีด
cleanup_result = backup_manager.cleanup_old_backups()
```

## ๐ ีีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏีถีฅึีซ ีฏีกีผีธึึีพีกีฎึ

```
backups/
โโโ backup_20240101_120000.zip
โโโ backup_20240102_093000.zip
โโโ backup_20240103_150000.zip
```

### ีีกีตีฌีซ ีกีถีพีกีถ ึีธึีดีกีฟ

`backup_YYYYMMDD_HHMMSS.zip`

- **YYYY** - ีฟีกึีซ
- **MM** - ีกีดีซีฝ  
- **DD** - ึึ
- **HH** - ีชีกีด
- **MM** - ึีธีบีฅ
- **SS** - ีพีกีตึีฏีตีกีถ

### ิฑึีญีซีพีซ ีขีธีพีกีถีคีกีฏีธึีฉีตีธึีถ

```
backup_20240101_120000.zip
โโโ metadata.json          # ีึีซีถีกีฏีซ ีดีฅีฟีกีฟีพีตีกีฌีถีฅึ
โโโ data/
โ   โโโ expenses.db        # ีีพีตีกีฌีถีฅึีซ ีขีกีฆีก
โ   โโโ users.json         # ีีฃีฟีกีฟีฅึีฅึ
โ   โโโ allowed_users.json # ินีธึีตีฌีกีฟึีพีกีฎ ึีฃีฟีกีฟีฅึีฅึ
โ   โโโ bot_config.json    # ิฟีกึีฃีกีพีธึีธึีดีถีฅึ
โโโ config/
โ   โโโ localization.json  # ีีฅีฒีกีตีถีกึีดีกีถ ึีกีตีฌ
โโโ credentials/           # ีีกีพีกีฟีกึีดีกีฃึีฅึ (ีฅีฉีฅ ีฃีธีตีธึีฉีตีธึีถ ีธึีถีซ)
    โโโ *.json
```

## โ๏ธ ิฟีกึีฃีกีพีธึีธึีด

### ีีซีปีกีพีกีตึีซ ึีธึีธีญีกีฏีกีถีถีฅึ

```bash
# ีีกีฐีฅีฝีฟีกีพีธึีดีกีถ ีฃึีกึีธึึีกีฏีซ ีธึีฒีซ (ีฌีผีฅีฌีตีกีตีถ: backups)
BACKUP_DIR=backups

# ีึีซีถีกีฏีถีฅึีซ ีกีผีกีพีฅีฌีกีฃีธึีตีถ ีฟีกึีซึ ึึีฅึีธีพ (ีฌีผีฅีฌีตีกีตีถ: 30)
BACKUP_MAX_AGE_DAYS=30

# ีึีซีถีกีฏีถีฅึีซ ีกีผีกีพีฅีฌีกีฃีธึีตีถ ึีกีถีกีฏ (ีฌีผีฅีฌีตีกีตีถ: 50)
BACKUP_MAX_COUNT=50
```

### ิฑีพีฟีธีดีกีฟ ีดีกึึีธึีด

ีีกีดีกีฏีกึีฃีจ ีกีพีฟีธีดีกีฟ ีฐีฅีผีกึีถีธึีด ีง:

- 30 ึึีซึ ีฐีซีถ ึึีซีถีกีฏีถีฅึีจ
- ีีถีกีฝีพีกีฎ ึีกีตีฌีฅึีจ
- ิฑีพีฅีฌึีธึีฏ ึึีซีถีกีฏีถีฅึีจ (50-ีซึ ีกีพีฅีฌีซ)

## ๐ ิฑีถีพีฟีกีถีฃีธึีฉีตีธึีถ

### ิฑีดีขีธีฒีปีกีฏีกีถีธึีฉีตีกีถ ีฝีฟีธึีฃีธึีดีถีฅึ

- **ZIP ีกึีญีซีพีถีฅึีซ ีพีกีพีฅึีกึีธึีด** ีฝีฟีฅีฒีฎีดีกีถ ึ ีพีฅึีกีฏีกีถีฃีถีดีกีถ ีชีกีดีกีถีกีฏ
- **ีีฅีฟีกีฟีพีตีกีฌีถีฅึีซ ีฝีฟีธึีฃีธึีด** ีฐีกีดีกีฟีฅีฒีฅีฌีซีธึีฉีตีกีถ ีฐีกีดีกึ
- **ิธีถีฉีกึีซีฏ ีพีซีณีกีฏีซ ีบีกีฐีฅีฝีฟีกีพีธึีธึีด** ีพีฅึีกีฏีกีถีฃีถีธึีดีซึ ีกีผีกีป

### ีีธึีฟึีซ ีซึีกีพีธึีถึีถีฅึ

- ีีกีฐีฅีฝีฟีกีพีธึีดีกีถ ีฃีธึีฎีธีฒีธึีฉีตีธึีถีถีฅึีจ ีฐีกีฝีกีถีฅีฌีซ ีฅีถ **ีดีซีกีตีถ ีกีคีดีซีถีซีฝีฟึีกีฟีธึีถีฅึีซีถ**
- ิฒีธีฌีธึ ีฃีธึีฎีธีฒีธึีฉีตีธึีถีถีฅึีจ **ีฃึีกีถึีพีธึีด ีฅีถ** ีกีธึีคีซีฟีซ ีฐีกีดีกึ
- **ิฟีกึึีธึ ีฃีธึีฎีธีฒีธึีฉีตีธึีถีถีฅึีซ ีฐีกีฝีฟีกีฟีธึีด** (ีพีฅึีกีฏีกีถีฃีถีธึีด, ีปีถีปีธึีด)

## ๐ ีีธีถีซีฉีธึีซีถีฃ

### ิณึีกีถึีธึีด

ีีกีฐีฅีฝีฟีกีพีธึีดีกีถ ีขีธีฌีธึ ีฃีธึีฎีธีฒีธึีฉีตีธึีถีถีฅึีจ ีฃึีกีถึีพีธึีด ีฅีถ:

```
2024-01-01 12:00:00 - INFO - ีีฟีฅีฒีฎีพีฅีฌ ีง ีบีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏ: backup_20240101_120000.zip
2024-01-01 12:05:00 - INFO - ีีฅึีกีฏีกีถีฃีถีพีฅีฌ ีง ึึีซีถีกีฏีซึ: backup_20240101_120000.zip
2024-01-01 12:10:00 - INFO - ีีซีถ ึึีซีถีกีฏีถีฅึีซ ีดีกึึีธึีด: ีฐีฅีผีกึีพีฅีฌ ีง 3 ึีกีตีฌ
```

### ีีซีณีกีฏีกีฃึีธึีฉีตีธึีถ

- **ิธีถีคีฐีกีถีธึึ ึีกีถีกีฏ** ีบีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏีถีฅึีซ
- **ิธีถีคีฐีกีถีธึึ ีนีกึ** ีขีธีฌีธึ ึึีซีถีกีฏีถีฅึีซ
- **ีีฅึีปีซีถ ีบีกีฐีฅีฝีฟีกีพีธึีดีกีถ** ีกีดีฝีกีฉีซีพ
- **ีีฅึีปีซีถ ีฃีธึีฎีธีฒีธึีฉีตีกีถ** ีฏีกึีฃีกีพีซีณีกีฏ

## โ ิฟีกึึีธึ ีถีทีธึีดีถีฅึ

1. **ีีฅึีกีฏีกีถีฃีถีธึีดีซึ ีกีผีกีป** ีดีซีทีฟ ีฝีฟีฅีฒีฎีพีธึีด ีง ีจีถีฉีกึีซีฏ ีพีซีณีกีฏีซ ีบีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏ
2. **ีีฅึีกีฏีกีถีฃีถีดีกีถ ีฃีธึีฎีธีฒีธึีฉีตีธึีถีถีฅึีจ** ีบีกีฐีกีถีปีธึีด ีฅีถ ีขีธีฟีซ ีพีฅึีกีฃีธึีฎีกึีฏีธึีด
3. **ีีฅีฎ ีฟีพีตีกีฌีถีฅึีซ ีขีกีฆีกีถีฅึีจ** ีฏีกึีธีฒ ีฅีถ ีชีกีดีกีถีกีฏ ีบีกีฐีกีถีปีฅีฌ ีบีกีฐีฅีฝีฟีกีพีธึีดีกีถ ีฐีกีดีกึ
4. **ีีกีพีกีฟีกึีดีกีฃึีฅึีจ** ีถีฅึีกีผีพีธึีด ีฅีถ ีดีซีกีตีถ ีฅีฉีฅ ึีกีตีฌีฅึีจ ีฃีธีตีธึีฉีตีธึีถ ีธึีถีฅีถ
5. **ิฑีพีฟีธีดีกีฟ ีดีกึึีธึีดีจ** ีฏีกีฟีกึีพีธึีด ีง ีขีธีฟีซ ีตีธึึีกึีกีถีนีตีธึึ ีฃีธึีฎีกึีฏีดีกีถ ีชีกีดีกีถีกีฏ

## ๐ ิฝีถีคีซึีถีฅึีซ ีฌีธึีฎีธึีด

### ิฝีถีคีซึ: ีีซ ีฐีกีปีธีฒีพีธึีด ีฝีฟีฅีฒีฎีฅีฌ ีบีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏ

**ิผีธึีฎีธึีด:**
- ีีฟีธึีฃีฅึ ีดีธึีฟึีซ ีซึีกีพีธึีถึีถีฅึีจ `backups/` ีบีกีถีกีฏีซีถ
- ีีกีดีธีฆีพีฅึ, ีธึ ีคีซีฝีฏีธึีด ีฏีก ีขีกีพีกึีกึ ีฟีกึีกีฎึ
- ีีฟีธึีฃีฅึ, ีฉีฅ ึีกีตีฌีฅึีจ ีฏีธีฒีบีพีกีฎ ีนีฅีถ ีกีตีฌ ีฃีธึีฎีจีถีฉีกึีถีฅึีซ ีฏีธีฒีดีซึ

### ิฝีถีคีซึ: ีีฅึีกีฏีกีถีฃีถีดีกีถ ีฝีญีกีฌ

**ิผีธึีฎีธึีด:**
- ีีฟีธึีฃีฅึ ZIP ีกึีญีซีพีซ ีกีดีขีธีฒีปีกีฏีกีถีธึีฉีตีธึีถีจ
- ีีกีดีธีฆีพีฅึ, ีธึ ึีกีตีฌีจ ีพีถีกีฝีพีกีฎ ีนีง
- ีีฟีธึีฃีฅึ ีฟีกึีขีฅึีกีฏีถีฅึีซ ีฐีกีดีกีฟีฅีฒีฅีฌีซีธึีฉีตีธึีถีจ ีดีฅีฟีกีฟีพีตีกีฌีถีฅึีธึีด

### ิฝีถีคีซึ: ีีกึีกีฆีกีถึ ีทีกีฟ ีบีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏีถีฅึ

**ิผีธึีฎีธึีด:**
- ิฟีกีฟีกึีฅึ ีฐีซีถ ึึีซีถีกีฏีถีฅึีซ ีดีกึึีธึีด ีฑีฅีผึีธีพ
- ีีธีญีฅึ `BACKUP_MAX_COUNT` ึ `BACKUP_MAX_AGE_DAYS` ีฏีกึีฃีกีพีธึีธึีดีถีฅึีจ
- ีีฅีผีกึึีฅึ ีกีถีบีฅีฟึ ึึีซีถีกีฏีถีฅึีจ ึีกีตีฌีกีตีซีถ ีฐีกีดีกีฏีกึีฃีซ ีดีซีปีธึีธีพ

## ๐ ิฑีฒีฅีฟีซึ ีพีฅึีกีฏีกีถีฃีถีธึีด

ีีพีตีกีฌีถีฅึีซ ีกีดีขีธีฒีปีกีฏีกีถ ีฏีธึีฝีฟีซ ีคีฅีบึีธึีด:

1. **ิฟีกีถีฃีถีฅึึีฅึ ีขีธีฟีจ**
2. **ิธีถีฟึีฅึ ีฐีกีดีกีบีกีฟีกีฝีญีกีถ ีบีกีฐีฅีฝีฟีกีตีซีถ ึึีซีถีกีฏ**
3. **ีีฅึีกีฏีกีถีฃีถีฅึ ีดีซีปีฅึีฅีฝีซ ีดีซีปีธึีธีพ** ีฏีกีด ีฎึีกีฃึีกีตีซีถ ีฅีฒีกีถีกีฏีธีพ:

   ```python
   backup_manager.restore_backup("backup_filename.zip")
   ```

4. **ีีฅึีกีฃีธึีฎีกึีฏีฅึ ีขีธีฟีจ**
5. **ีีฟีธึีฃีฅึ ีฃีธึีฎีธึีถีกีฏีธึีฉีตีธึีถีจ**

---

*ิผึีกึีธึึีซีน ีฟีฅีฒีฅีฏีธึีฉีตีธึีถีถีฅึีซ ีฐีกีดีกึ ีคีซีดีฅึ [ีฐีซีดีถีกีฏีกีถ ึีกีฝีฟีกีฉีฒีฉีกีพีธึีดีกีถีจ](../README.md)*
