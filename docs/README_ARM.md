# 🤖 CoordinatBot - Ֆինանսական հաշվապահության համակարգ

## 📋 Նկարագրություն

CoordinatBot-ը հզոր Telegram բոտ է ֆինանսական գրառումների կառավարման և Google Sheets-ի հետ ինտեգրացման համար: Բոտը նախատեսված է ծախսերի հետևման, հաշվետվությունների ստեղծման և աշխատակիցների վճարումների կառավարման համար:

## ✨ Հիմնական հնարավորություններ

### 📝 Գրառումների կառավարում
- ➕ Ծախսերի գրառումների ավելացում ինտերակտիվ մենյուի միջոցով
- ✏️ Գրառումների խմբագրում և ջնջում
- 🔍 Գրառումների որոնում և ֆիլտրացում
- 📊 Մանրամասն տեղեկատվություն յուրաքանչյուր գրառման մասին

### 🔄 Google Sheets ինտեգրացիա
- 📈 Ավտոմատ սինխրոնիզացիա Google Sheets-ի հետ
- 📋 Բազմաթիվ աղյուսակների և թերթերի աջակցություն
- 🔁 Երկկողմանի տվյալների սինխրոնիզացիա
- ⚡ Իրական ժամանակի թարմացումներ

### 📊 Հաշվետվություններ և վերլուծություն
- 📄 Excel ֆորմատով հաշվետվությունների ստեղծում
- 💰 Վճարումների և պարտքերի հետևում
- 📈 Վիճակագրական վերլուծություն
- 🏢 Անհատական հաշվետվություններ աշխատակիցների համար

### 👥 Բազմօգտագործողի աջակցություն
- 🔐 Անվտանգ օգտագործողների կառավարում
- 🛡️ Մուտքի թույլտվությունների համակարգ
- 👑 Ադմինիստրատորների հատուկ հնարավորություններ
- 📱 Օգտագործողական կարգավորումներ

## 🚀 Տեղադրում և կարգավորում

### Պահանջվող ծրագրեր
```bash
Python 3.8+
pip
Git
```

### 1. Ծրագրի ներբեռնում
```bash
git clone https://github.com/your-username/CoordinatBot.git
cd CoordinatBot
```

### 2. Կախվածությունների տեղադրում
```bash
pip install -r requirements.txt
```

### 3. Շրջակա միջավայրի կարգավորում
Ստեղծեք `.env` ֆայլ և ավելացրեք անհրաժեշտ մուտքային տվյալները:

```env
# Telegram Bot Token
TELEGRAM_BOT_TOKEN=your_bot_token_here

# Ադմինիստրատորների ID-ներ (ստորակետով բաժանված)
ADMIN_IDS=123456789,987654321

# Գրանցամատյանի մակարդակ
LOG_LEVEL=INFO
```

### 4. Google Sheets կարգավորում
1. Ստեղծեք Google Cloud Console նախագիծ
2. Միացրեք Google Sheets API
3. Ստեղծեք Service Account
4. Ներբեռնեք credentials JSON ֆայլը
5. Տեղադրեք այն `credentials/` պանակում

### 5. Տվյալների բազայի նախապատրաստում
```bash
python -c "from src.database.database_manager import init_db; init_db()"
```

### 6. Բոտի գործարկում
```bash
python main_new.py
```

## 📁 Նախագծի կառուցվածք

```
CoordinatBot/
├── 📁 src/                          # Հիմնական ծրագրային կոդ
│   ├── 📁 bot/                      # Telegram բոտի տրամաբանություն
│   │   ├── 📁 handlers/             # Հրամանների և իրադարձությունների մշակիչներ
│   │   │   ├── basic_commands.py    # Հիմնական հրամաններ
│   │   │   ├── admin_commands.py    # Ադմինիստրատիվ հրամաններ
│   │   │   ├── record_handlers.py   # Գրառումների ավելացում
│   │   │   ├── edit_handlers.py     # Գրառումների խմբագրում
│   │   │   └── callback_handlers.py # Կոճակների մշակիչներ
│   │   ├── 📁 keyboards/            # Ինտերակտիվ ստեղնաշարեր
│   │   │   └── inline_keyboards.py  # Ինլայն ստեղնաշարեր
│   │   └── 📁 states/               # ConversationHandler վիճակներ
│   │       └── conversation_states.py
│   ├── 📁 database/                 # Տվյալների բազայի մշակում
│   │   └── database_manager.py      # ՏԲ կառավարիչ
│   ├── 📁 google_integration/       # Google Sheets ինտեգրացիա
│   │   ├── sheets_manager.py        # Հիմնական գործողություններ
│   │   └── sync_manager.py          # Սինխրոնիզացիա
│   ├── 📁 utils/                    # Օգտակար գործիքներ
│   │   ├── config_utils.py          # Կարգավորումների մշակում
│   │   ├── date_utils.py            # Ամսաթվային գործիքներ
│   │   ├── formatting.py            # Հաղորդագրությունների ֆորմատավորում
│   │   └── report_manager.py        # Հաշվետվությունների ստեղծում
│   └── 📁 config/                   # Կարգավորումներ
│       └── settings.py              # Նախագծի կարգավորումներ
├── 📁 data/                         # Տվյալների ֆայլեր
│   ├── users.json                   # Օգտագործողների տվյալներ
│   ├── allowed_users.json           # Թույլատրված օգտագործողներ
│   ├── bot_config.json              # Բոտի կարգավորումներ
│   └── expenses.db                  # SQLite տվյալների բազա
├── 📁 credentials/                  # Մուտքային տվյալներ
│   └── google-credentials.json      # Google API մուտքային տվյալներ
├── main_new.py                      # Հիմնական գործարկման ֆայլ
├── requirements.txt                 # Python կախվածություններ
├── .env                            # Շրջակա միջավայրի փոփոխականներ
└── README.md                       # Այս ֆայլը
```

## 🎮 Օգտագործման ուղեցույց

### Հիմնական հրամաններ

#### Օգտագործողական հրամաններ:
- `/start` - Բոտի գործարկում և գլխավոր մենյու
- `/menu` - Գլխավոր մենյուի ցուցադրում
- `/help` - Հրամանների օգնություն
- `/search [տեքստ]` - Գրառումների որոնում
- `/recent [N]` - Վերջին N գրառումների ցուցադրում
- `/info [ID]` - Գրառման մանրամասն տեղեկատվություն

#### Ադմինիստրատիվ հրամաններ:
- `/allow_user [ID]` - Օգտագործողի ավելացում
- `/disallow_user [ID]` - Օգտագործողի հեռացում
- `/allowed_users` - Թույլատրված օգտագործողների ցուցակ
- `/set_user_name [ID] [անուն]` - Օգտագործողի անվան սահմանում
- `/set_log` - Գրանցամատյանի չատի սահմանում
- `/set_report [ID] [անուն]` - Հաշվետվությունների կարգավորում
- `/export` - Տվյալների արտահանում JSON ֆորմատով
- `/sync_sheets` - Google Sheets-ի հետ սինխրոնիզացիա
- `/my_report [անուն]` - Անհատական հաշվետվության ստեղծում

### Գրառումների ավելացում

1. Սեղմեք "➕ Ծախս ավելացնել" կոճակը
2. Ընտրեք մատակարարի տիպը:
   - 👤 Ձեր անունը
   - 🏢 Ֆիրմայի անունը
   - ✏️ Ձեռքով մուտքագրել
3. Մուտքագրեք ուղղությունը
4. Մուտքագրեք ծախսի նկարագրությունը
5. Մուտքագրեք գումարը
6. Հաստատեք գրառումը

### Գրառումների խմբագրում

1. Գտեք գրառումը `/recent` կամ `/search` հրամանով
2. Սեղմեք "✏️ Խմբագրել" կոճակը
3. Ընտրեք խմբագրվող դաշտը
4. Մուտքագրեք նոր արժեքը
5. Հաստատեք փոփոխությունները

## 🔧 Տեխնիկական մանրամասներ

### Օգտագործված տեխնոլոգիաներ

- **Python 3.8+** - Հիմնական ծրագրավորման լեզու
- **python-telegram-bot** - Telegram Bot API-ի wrapper
- **SQLite** - Տվյալների բազա
- **pandas** - Տվյալների վերլուծություն
- **openpyxl** - Excel ֆայլերի մշակում
- **gspread** - Google Sheets API
- **python-dotenv** - Շրջակա միջավայրի կառավարում

### Ճարտարապետություն

Նախագիծը կառուցված է մոդուլային ճարտարապետության վրա՝ հստակ տարանջատմամբ հանցումների միջև:

#### Շերտեր:
1. **Ներկայացման շերտ** (`bot/handlers/`) - Telegram API-ի հետ փոխգործակցություն
2. **Գործարար տրամաբանության շերտ** (`utils/`) - Գործարար օրենքներ և տրամաբանություն
3. **Տվյալների շերտ** (`database/`) - Տվյալների պահպանում և բեռնում
4. **Ինտեգրացիայի շերտ** (`google_integration/`) - Արտաքին API-ների հետ ինտեգրացիա

### Տվյալների մոդել

#### Records (Գրառումներ)
- `id` - Եզակի նույնականացուցիչ
- `date` - Ամսաթիվ
- `supplier` - Մատակարար
- `direction` - Ուղղություն
- `description` - Նկարագրություն
- `amount` - Գումար
- `spreadsheet_id` - Google Sheets ID
- `sheet_name` - Թերթի անուն
- `user_id` - Օգտագործողի ID

#### Payments (Վճարումներ)
- `id` - Եզակի նույնականացուցիչ
- `user_display_name` - Օգտագործողի անուն
- `amount` - Գումար
- `date_from` - Վճարման սկզբի ամսաթիվ
- `date_to` - Վճարման վերջի ամսաթիվ
- `comment` - Մեկնաբանություն

## 🛡️ Անվտանգություն

### Մուտքի վերահսկում
- Միայն թույլատրված օգտագործողները կարող են մուտք գործել բոտ
- Ադմինիստրատիվ ֆունկցիաները սահմանափակված են որոշակի օգտագործողների համար
- Օգտագործողները կարող են խմբագրել միայն իրենց սեփական գրառումները

### Տվյալների պաշտպանություն
- Կարևոր տվյալները պահվում են շրջակա միջավայրի փոփոխականներում
- Տվյալների բազայի պարբերական կրկնօրինակում
- Գրանցամատյանի վարում բոլոր գործողությունների

## 📈 Մոնիտորինգ և գրանցամատյան

Բոտը ունի ընդգրկուն գրանցամատյանի համակարգ՝

- ℹ️ **INFO** - Հիմնական գործողություններ
- ⚠️ **WARNING** - Զգուշացումներ և անսովոր իրավիճակներ
- ❌ **ERROR** - Սխալներ և բացառություններ

Գրանցամատյանի մակարդակը կարող է կարգավորվել `.env` ֆայլում:

## 🔄 Backup և վերականգնում

### Ավտոմատ backup
Բոտը ստեղծում է ավտոմատ backup՝ JSON ֆորմատով `/export` հրամանի միջոցով:

### Ձեռքով backup
```bash
# Տվյալների բազայի backup
cp data/expenses.db backup/expenses_$(date +%Y%m%d_%H%M%S).db

# Կարգավորումների backup
cp data/*.json backup/
```

## 🤝 Ներդրում նախագծում

### Նոր ֆունկցիաների ավելացում

1. Ստեղծեք նոր branch
2. Ավելացրեք ձեր փոփոխությունները
3. Ստեղծեք Pull Request
4. Անցկացրեք code review

### Կոդային ստանդարտներ

- Հետևեք PEP 8 ստանդարտին
- Գրեք ապացուցիչներ (docstrings) բոլոր ֆունկցիաների համար
- Ավելացրեք unit տեստեր նոր ֆունկցիաների համար
- Պահպանեք մոդուլային ճարտարապետությունը

## 📞 Աջակցություն

Հարցերի կամ խնդիրների դեպքում դիմեք՝

- 📧 Email: support@coordinatbot.com
- 💬 Telegram: @coordinatbot_support
- 🐛 Issues: GitHub Issues բաժին

## 📄 Լիցենզիա

Այս նախագիծը հրապարակված է MIT լիցենզիայի ներքո: Մանրամասների համար տես `LICENSE` ֆայլը:

## 🙏 Շնորհակալություն

Հատուկ շնորհակալություն՝

- Telegram Bot API թիմին
- Google Sheets API մշակողներին
- Բաց կոդի համայնքին

---

**CoordinatBot** - Ձեր վստահելի գործընկերը ֆինանսական կառավարման մեջ! 💼✨
